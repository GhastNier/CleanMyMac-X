<?xml version="1.0" encoding="utf-8" ?>
<elements>
    <info>
        <name>The Warlock - Remastered</name>
        <description>A new take on the Warlock.</description>
        <author url="https://www.gmbinder.com/profile/drognbork">DrognBork</author>
        <update version="1.0.0">
            <file name="warlock-remastered.xml" url="https://raw.githubusercontent.com/GhastNier/warlock-remastered/warlock-remastered.xml" />
        </update>
    </info>

    <element name="Warlock" type="Class" source="The Warlock Remastered" id="ID_HB_WR_CLASS_WARLOCK">
        <description>
            <p>With a pseudodragon curled on his shoulder, a young elf in golden robes smiles warmly, weaving a magical charm into his honeyed words and bending the palace sentinel to his will.</p>
            <p class="indent">As flames spring to life in her hands, a wizened human whispers the secret name of her demonic patron, infusing her spell with fiendish magic. Shifting his gaze between a battered tome and the odd alignment of the stars overhead, a wild-eyed tiefling chants the mystic ritual that will open a doorway to a distant world.</p>
            <p class="indent">Warlocks are seekers of the knowledge that lies hidden in the fabric of the multiverse. Through pacts made with mysterious beings of supernatural power, warlocks unlock magical effects both subtle and spectacular. Drawing on the ancient knowledge of beings such as fey nobles, demons, devils, hags, and alien entities of the Far Realm, warlocks piece together arcane secrets to bolster their own power.</p>
            <h4>SWORN AND BEHOLDEN</h4>
            <p>A warlock is defined by a pact with an otherworldly being. Sometimes the relationship between warlock and patron is like that of a cleric and a deity, though the beings that serve as patrons for warlocks are not gods. A warlock might lead a cult dedicated to a demon prince, an archdevil, or an utterly alien entity—beings not typically served by clerics. More often, though, the arrangement is similar to that between a master and an apprentice. The warlock learns and grows in power, at the cost of occasional services performed on the patron’s behalf.</p>
            <p class="indent">The magic bestowed on a warlock ranges from minor but lasting alterations to the warlock's being (such as the ability to see in darkness or to read any language) to access to powerful spells. Unlike bookish wizards, warlocks supplement their magic with some facility at hand-to-hand combat. They are comfortable in light armor and know how to use simple weapons.</p>
            <h4>DELVERS INTO SECRETS</h4>
            <p>Warlocks are driven by an insatiable need for knowledge and power, which compels them into their pacts and shapes their lives. This thirst drives warlocks into their pacts and shapes their later careers as well.</p>
            <p class="indent">Stories of warlocks binding themselves to fiends are widely known. But many warlocks serve patrons that are not fiendish. Sometimes a traveler in the wilds comes to a strangely beautiful tower, meets its fey lord or lady, and stumbles into a pact without being fully aware of it. And sometimes, while poring over tomes of forbidden lore, a brilliant but crazed student’s mind is opened to realities beyond the material world and to the alien beings that dwell in the outer void.</p>
            <p class="indent">Once a pact is made, a warlock’s thirst for knowledge and power can’t be slaked with mere study and research. No one makes a pact with such a mighty patron if he or she doesn’t intend to use the power thus gained. Rather, the vast majority of warlocks spend their days in active pursuit of their goals, which typically means some kind of adventuring. Furthermore, the demands of their patrons drive warlocks toward adventure.</p>
            <h4>CREATING A WARLOCK</h4>
            <p>As you make your warlock character, spend some time thinking about your patron and the obligations that your pact imposes upon you. What led you to make the pact, and how did you make contact with your patron? Were you seduced into summoning a devil, or did you seek out the ritual that would allow you to make contact with an alien elder god? Did you search for your patron, or did your patron find and choose you? Do you chafe under the obligations of your pact or serve joyfully in anticipation of the rewards promised to you?</p>
            <p class="indent">Work with your DM to determine how big a part your pact will play in your character’s adventuring career. Your patron’s demands might drive you into adventures, or they might consist entirely of small favors you can do between adventures.</p>
            <p class="indent">What kind of relationship do you have with your patron? Is it friendly, antagonistic, uneasy, or romantic? How important does your patron consider you to be? What part do you play in your patron’s plans? Do you know other servants of your patron?</p>
            <p class="indent">How does your patron communicate with you? If you have a familiar, it might occasionally speak with your patron’s voice. Some warlocks find messages from their patrons etched on trees, mingled among tea leaves, or adrift in the clouds—messages that only the warlock can see. Other warlocks converse with their patrons in dreams or waking visions, or deal only with intermediaries.</p>
            <h5>QUICK BUILD</h5>
            <p>You can make a warlock quickly by following these suggestions. First, Charisma should be your highest ability score, followed by Constitution. Second, choose the charlatan background. Third, choose the eldritch blast and chill touch cantrips, along with the 1st-level spells charm person and witch bolt.</p>
            <h3>CLASS FEATURES</h3>
            <p>As a warlock, you gain the following class features.</p>
            <h5>HIT POINTS</h5>
            <ul class="unstyled">
                <li><strong>Hit Dice:</strong> 1d8 per warlock level</li>
                <li><strong>Hit Points at 1st Level:</strong> 8 + your Constitution modifier</li>
                <li><strong>Hit Points at Higher Levels:</strong> 1d8 (or 5) + your Constitution modifier per warlock level after 1st</li>
            </ul>
            <h5>PROFICIENCIES</h5>
            <ul class="unstyled mb">
                <li><strong>Armor:</strong> Light armor</li>
                <li><strong>Weapons:</strong> Simple weapons</li>
                <li><strong>Tools:</strong> None</li>
            </ul>
            <ul class="unstyled">
                <li><strong>Saving Throws:</strong> Wisdom, Charisma</li>
                <li><strong>Skills:</strong> Choose two skills from Arcana, Deception, History, Intimidation, Investigation, Nature, and Religion</li>
            </ul>
            <h5>EQUIPMENT</h5>
            <p>You start with the following equipment, in addition to the equipment granted by your background:</p>
            <ul>
                <li>(a) a light crossbow and 20 bolts or (b) any simple weapon</li>
                <li>(a) leather armor or (b) scale mail (<i>if proficient</i>)</li>
                <li>(a) a component pouch or (b) an arcane focus</li>
                <li>(a) a scholar’s pack or (b) a dungeoneer’s pack</li>
                <li>Two daggers</li>
            </ul>
            <h5 class="caption">THE WARLOCK</h5>
            <table class="class-features">
                <thead>
                    <tr><td class="col-5">Level</td><td class="left">Features</td><td class="col-10">Cantrips Known</td><td class="col-10">Spells Known</td><td class="col-10">Spell Slots</td><td class="col-10">Slot Level</td><td class="col-10">Invocations Known</td></tr>
                </thead>
                <tr><td> 1st</td><td class="left">Otherworldly Patron,Pact Boon, Pact Magic, Eldritch Overflow(1d4)</td><td>2</td><td>3</td><td>1</td><td>1st</td><td>—</td></tr>
                <tr><td> 2nd</td><td class="left">Eldritch Invocations</td><td>2</td><td>4</td><td>2</td><td>1st</td><td>2</td></tr>
                <tr><td> 3rd</td><td class="left">Pact Boon Feature</td><td>2</td><td>5</td><td>2</td><td>2nd</td><td>2</td></tr>
                <tr><td> 4th</td><td class="left">Ability Score Improvement</td><td>3</td><td>6</td><td>2</td><td>2nd</td><td>3</td></tr>
                <tr><td> 5th</td><td class="left">Pact Boon Feature</td><td>3</td><td>7</td><td>2</td><td>3rd</td><td>3</td></tr>
                <tr><td> 6th</td><td class="left">Otherworldly Patron feature</td><td>3</td><td>8</td><td>2</td><td>3rd</td><td>4</td></tr>
                <tr><td> 7th</td><td class="left">Pact Boon Feature</td><td>3</td><td>9</td><td>2</td><td>4th</td><td>4</td></tr>
                <tr><td> 8th</td><td class="left">Ability Score Improvement. Eldritch Overflow(1d6)</td><td>3</td><td>10</td><td>2</td><td>4th</td><td>5</td></tr>
                <tr><td> 9th</td><td class="left">—</td><td>3</td><td>11</td><td>2</td><td>5th</td><td>5</td></tr>
                <tr><td>10th</td><td class="left">Otherworldly Patron feature</td><td>4</td><td>12</td><td>2</td><td>5th</td><td>6</td></tr>
                <tr><td>11th</td><td class="left">Mystic Arcanum (6th level)</td><td>4</td><td>13</td><td>3</td><td>5th</td><td>6</td></tr>
                <tr><td>12th</td><td class="left">Ability Score Improvement</td><td>4</td><td>14</td><td>3</td><td>5th</td><td>6</td></tr>
                <tr><td>13th</td><td class="left">Mystic Arcanum (7th level)</td><td>4</td><td>15</td><td>3</td><td>5th</td><td>7</td></tr>
                <tr><td>14th</td><td class="left">Otherworldly Patron feature, Eldritch Overflow(1d8)</td><td>4</td><td>15</td><td>3</td><td>5th</td><td>7</td></tr>
                <tr><td>15th</td><td class="left">Mystic Arcanum (8th level)</td><td>4</td><td>15</td><td>3</td><td>5th</td><td>8</td></tr>
                <tr><td>16th</td><td class="left">Ability Score Improvement</td><td>4</td><td>15</td><td>3</td><td>5th</td><td>8</td></tr>
                <tr><td>17th</td><td class="left">Mystic Arcanum (9th level), Eldritch Overflow(1d10)</td><td>4</td><td>15</td><td>4</td><td>5th</td><td>9</td></tr>
                <tr><td>18th</td><td class="left">Arcane Feedback</td><td>4</td><td>15</td><td>4</td><td>5th</td><td>8</td></tr>
                <tr><td>19th</td><td class="left">Ability Score Improvement</td><td>4</td><td>15</td><td>4</td><td>5th</td><td>9</td></tr>
                <tr><td>20th</td><td class="left">Eldritch Mastery</td><td>4</td><td>15</td><td>4</td><td>5th</td><td>9</td></tr>
            </table>
            <div element="ID_HB_WR_CLASS_FEATURE_OTHERWORLDLY_PATRON" />
            <div element="ID_HB_WR_CLASS_FEATURE_PACT_MAGIC" />
            <div element="ID_HB_WR_CLASS_FEATURE_ELDRITCH_INVOCATIONS" />
            <div element="ID_HB_WR_CLASS_FEATURE_PACT_BOON" />
            <div element="ID_HB_WR_CLASS_FEATURE_ABILITY_SCORE_IMPROVEMENT_WARLOCK" />
            <div element="ID_HB_WR_CLASS_FEATURE_MYSTIC_ARCANUM" />
            <div element="ID_HB_WR_CLASS_FEATURE_ELDRITCH_MASTERY" />
        </description>
        <sheet display="false">
            <description>A wielder of magic that is derived from a bargain with an extraplanar entity.</description>
        </sheet>
        <setters>
            <set name="short">A wielder of magic that is derived from a bargain with an extraplanar entity.</set>
            <set name="hd">d8</set>
        </setters>
        <rules>
            <grant type="Proficiency" id="ID_PROFICIENCY_ARMOR_PROFICIENCY_LIGHT_ARMOR" requirements="!ID_WOTC_PHB_MULTICLASS_WARLOCK"/>
            <grant type="Proficiency" id="ID_PROFICIENCY_WEAPON_PROFICIENCY_SIMPLE_WEAPONS" requirements="!ID_WOTC_PHB_MULTICLASS_WARLOCK"/>
            <grant type="Proficiency" id="ID_PROFICIENCY_SAVINGTHROW_WISDOM" requirements="!ID_WOTC_PHB_MULTICLASS_WARLOCK"/>
            <grant type="Proficiency" id="ID_PROFICIENCY_SAVINGTHROW_CHARISMA" requirements="!ID_WOTC_PHB_MULTICLASS_WARLOCK"/>
            <select type="Proficiency" name="Skill Proficiency (Warlock)" supports="Skill,Warlock" number="2" requirements="!ID_WOTC_PHB_MULTICLASS_WARLOCK"/>
            <grant type="Class Feature" id="ID_HB_WR_CLASS_FEATURE_OTHERWORLDLY_PATRON" level="1"/>
            <grant type="Class Feature" id="ID_HB_WR_CLASS_FEATURE_PACT_MAGIC" level="1" />
            <grant type="Class Feature" id="ID_HB_WR_CLASS_FEATURE_ELDRITCH_OVERFLOW" level="1" />
            <grant type="Class Feature" id="ID_HB_WR_CLASS_FEATURE_ELDRITCH_INVOCATIONS" level="2" />
            <grant type="Class Feature" id="ID_HB_WR_CLASS_FEATURE_PACT_BOON" level="3" />
            <grant type="Class Feature" id="ID_HB_WR_CLASS_FEATURE_ABILITY_SCORE_IMPROVEMENT_WARLOCK" level="4" />
            <grant type="Class Feature" id="ID_HB_WR_CLASS_FEATURE_MYSTIC_ARCANUM" level="11" />
            <grant type="Class Feature" id="ID_HB_WR_CLASS_FEATURE_ELDRITCH_MASTERY" level="20" />
        </rules>
        <multiclass id="ID_WOTC_PHB_MULTICLASS_WARLOCK">
            <prerequisite>Charisma 13 or Intelligence 13 or Wisdom 13</prerequisite>
            <requirements>[cha:13]||[int:13]||[wis:13]</requirements>
            <setters>
                <set name="multiclass proficiencies">Light armor, simple weapons</set>
            </setters>
            <rules>
                <grant type="Grants" id="ID_INTERNAL_GRANT_MULTICLASS" />
                <grant type="Proficiency" id="ID_PROFICIENCY_ARMOR_PROFICIENCY_LIGHT_ARMOR" />
                <grant type="Proficiency" id="ID_PROFICIENCY_WEAPON_PROFICIENCY_SIMPLE_MELEE_WEAPONS" />
            </rules>
        </multiclass>
    </element>
    <element name="Otherworldly Patron" type="Class Feature" source="Warlock Remastered" id="ID_HB_WR_CLASS_FEATURE_OTHERWORLDLY_PATRON">
        <requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_OTHERWORLDLY_PATRON</requirements>
        <description>
            <p>At 1st level, you have struck a bargain with an otherworldly being of your choice. Your choice grants you features at 1st level and again at 6th level, 10th level, and 14th level.</p>
            <h6>Patron Spells</h6>
            <p>Your Patron has granted you access to certain spells. You gain access to these spells at their corresponding Warlock level(1st, 3rd, 5th, 7th, 9th). Once you gain a patron spell, you always know it, and it doesn't count against the number of spells you know. If you gain a spell that doesn’t appear on the warlock spell list, the spell is nonetheless a warlock spell for you.</p>
        </description>
        <sheet display="false" />
        <rules>
            <select type="Archetype" name="Otherworldly Patron" supports="Otherworldly Patron" />
        </rules>
    </element>
    <element name="Pact Magic" type="Class Feature" source="Warlock Remastered" id="ID_HB_WR_CLASS_FEATURE_PACT_MAGIC">
        <requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_SPELLCASTING_PACT_MAGIC</requirements>
        <description>
            <p>Your arcane research and the magic bestowed on you by your patron have given you facility with spells.</p>
            <h5>CANTRIPS</h5>
            <p>You know two cantrips of your choice from the warlock spell list. You learn additional warlock cantrips of your choice at higher levels, as shown in the Cantrips Known column of the Warlock table.</p>
            <h5>SPELL SLOTS</h5>
            <p>The Warlock table shows how many spell slots you have to cast your warlock spells of 1st through 5th level. The table also shows what the level of those slots is; all of your spell slots are the same level. To cast one of your warlock spells of 1st level or higher, you must expend a spell slot. You regain all expended spell slots when you finish a short or long rest.</p>
            <p class="indent">For example, when you are 5th level, you have three 3rd-level spell slots. To cast the 1st-level spell witch bolt, you must spend one of those slots, and you cast it as a 3rd-level spell.</p>
            <h5>SPELLS KNOWN OF 1ST LEVEL AND HIGHER</h5>
            <p>At 1st level, you know three 1st-level spells of your choice from the warlock spell list and your patron grants you two additional spell know at 1st, 3rd, 5th, 7th and 9th level.</p>
            <p class="indent">The Spells Known column of the Warlock table shows when you learn more warlock spells of your choice of 1st level and higher. A spell you choose must be of a level no higher than what’s shown in the table's Slot Level column for your level. When you reach 6th level, for example, you learn a new warlock spell, which can be 1st, 2nd, or 3rd level.</p>
            <p class="indent">Additionally, when you gain a level in this class, you can choose one of the warlock spells you know and replace it with another spell from the warlock spell list, which also must be of a level for which you have spell slots.</p>
            <h5>SPELL VERSATILITY</h5>
            <p>Whenever you finish a long rest, you can replace one spell youlearned from this Pact Magic feature with another spell from the warlock spell list. The new spell must be the same level as the spell you replace.</p>
            <h5>SPELLCASTING ABILITY</h5>
            <p>Choose either Intelligence or Charisma when you gain this feature. Your choice determines your spellcasting ability for your warlock spells. You use the chosen ability score when setting the saving throw DC and when making attack rolls withwarlock spells you cast. Also, you gain proficiency in saving throws using the chosen ability.</p>
            <p class="indent">
                <b>Spell save DC</b> = 8 + your proficiency bonus + your Spellcasting Ability modifier</p>
            <p class="indent">
                <b>Spell attack modifier</b> = your proficiency bonus + your Spellcasting Ability modifier</p>
            <h5>SPELLCASTING FOCUS</h5>
            <p>You can use an arcane focus as a spellcasting focus for your warlock spells.</p>
        </description>
        <sheet display="false">
            <description>Your arcane research and the magic bestowed on you by your patron have given you facility with spells. You have {{warlock:spellcasting:slots:count}} slots of level {{warlock:spellcasting:slot}}</description>
        </sheet>
        <spellcasting name="Warlock" ability="Charisma" allowReplace="true">
            <list>Warlock</list>
        </spellcasting>
        <rules>
            <!-- add not full but single _not counting as multiclass spellcaster due to pact magic -->
            <grant type="Grants" id="ID_INTERNAL_GRANT_MULTICLASS_SPELLCASTING_SLOTS_SOLO" requirements="ID_INTERNAL_GRANT_MULTICLASS"/>

            <stat name="warlock:spellcasting:slots:count" value="1" level="1"/>
            <stat name="warlock:spellcasting:slots:count" value="1" level="2"/>
            <stat name="warlock:spellcasting:slots:count" value="1" level="11"/>
            <stat name="warlock:spellcasting:slots:count" value="1" level="17"/>

            <stat name="warlock:spellcasting:slot" value="1" level="1" />
            <stat name="warlock:spellcasting:slot" value="1" level="3" />
            <stat name="warlock:spellcasting:slot" value="1" level="5" />
            <stat name="warlock:spellcasting:slot" value="1" level="7" />
            <stat name="warlock:spellcasting:slot" value="1" level="9" />

            <!-- negative count to remove slots -->
            <stat name="warlock:spellcasting:slots:1" value="warlock:spellcasting:slots:count" level="1" />
            <stat name="warlock:spellcasting:slots:1" value="-warlock:spellcasting:slots:count" level="3" />
            <stat name="warlock:spellcasting:slots:2" value="warlock:spellcasting:slots:count" level="3" />
            <stat name="warlock:spellcasting:slots:2" value="-warlock:spellcasting:slots:count" level="5" />
            <stat name="warlock:spellcasting:slots:3" value="warlock:spellcasting:slots:count" level="5" />
            <stat name="warlock:spellcasting:slots:3" value="-warlock:spellcasting:slots:count" level="7" />
            <stat name="warlock:spellcasting:slots:4" value="warlock:spellcasting:slots:count" level="7" />
            <stat name="warlock:spellcasting:slots:4" value="-warlock:spellcasting:slots:count" level="9" />
            <stat name="warlock:spellcasting:slots:5" value="warlock:spellcasting:slots:count" level="9" />

            <select type="Spell" name="Cantrip (Warlock)" supports="$(spellcasting:list),0" level="1" number="2" spellcasting="Warlock" />
            <select type="Spell" name="Cantrip (Warlock)" supports="$(spellcasting:list),0" level="4" spellcasting="Warlock" />
            <select type="Spell" name="Cantrip (Warlock)" supports="$(spellcasting:list),0" level="10" spellcasting="Warlock" />

            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="1" number="3" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="2" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="3" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="4" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="5" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="6" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="7" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="8" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="9" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="10" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="11" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="12" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="13" spellcasting="Warlock"/>
            <select type="Spell" name="Spellcasting (Warlock)" supports="$(spellcasting:list),$(spellcasting:slots)" level="15" spellcasting="Warlock"/>
        </rules>
    </element>
    <element name="Eldritch Invocations" type="Class Feature" source="The Warlock Remastered" id="ID_HB_WR_ELDRITCH_INVOCATIONS">
        <requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_ELDRITCH_INVOCATIONS</requirements>
        <description>
            <p>In your study of occult lore, you have unearthed eldritch invocations, fragments of forbidden knowledge that imbue you with an abiding magical ability.</p>
            <p class="indent">At 2nd level, you gain two eldritch invocations of your choice. Your invocation options are detailed at the end of the class description. When you gain certain warlock levels, you gain additional invocations of your choice, as shown in the Invocations Known column of the Warlock table.</p>
            <p class="indent">Additionally, when you gain a level in this class, you can choose one of the invocations you know and replace it with another invocation that you could learn at that level.</p>
        </description>
        <rules>
            <select type="Class Feature" name="Eldritch Invocation (Level 2)" supports="Eldritch Invocation" level="2" number="2" />
            <select type="Class Feature" name="Eldritch Invocation (Level 5)" supports="Eldritch Invocation" level="5" />
            <select type="Class Feature" name="Eldritch Invocation (Level 7)" supports="Eldritch Invocation" level="7" />
            <select type="Class Feature" name="Eldritch Invocation (Level 9)" supports="Eldritch Invocation" level="9" />
            <select type="Class Feature" name="Eldritch Invocation (Level 11)" supports="Eldritch Invocation" level="11" />
            <select type="Class Feature" name="Eldritch Invocation (Level 14)" supports="Eldritch Invocation" level="14" />
            <select type="Class Feature" name="Eldritch Invocation (Level 16)" supports="Eldritch Invocation" level="16" />
            <select type="Class Feature" name="Eldritch Invocation (Level 18)" supports="Eldritch Invocation" level="18" />
        </rules>
    </element>
    <element name="Pact Boon" type="Class Feature" source="The Warlock Remastered" id="ID_HB_WR_PACT_BOON">
        <requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_PACT_BOON</requirements>
        <description>
            <p>At 1rd level, your otherworldly patron bestows a gift upon you for your loyal service. You gain one of the following features of your choice.</p>
            <h5 class="caption">PACT OF THE CHAIN</h5>
            <p>You ask your patron for the ability to control others, and are rewarded with a bound familiar.</p>
            <h6>Chainned Familiar</h6>
            <p>You gain a special trinket from your patron which allows you to summon a familiar and bind it to your will.</p>
            <h5>Chain Trinket</h5>
            <p><i>Item, Trinket</i></p>
            <p>An eldritch trinket — such as a ring, bracelet, earring, or a diadem. While you are wearing this trinket, you can cast the Find Familiar spell as a ritual without spending material components.</p>
            <p class="indent">Your trinket bears the unmistakable mark of your patron —fiendish red veins, fey vines and flowers, aberrant runes and etchings, etc.</p>
            <ul>
                <li><strong>Chain Master</strong>: When you take the Attack action, you can forgo one of your attacks, or use your bonus action to allow your familiar to spend its reaction and make one attack of its own. You can use your Eldritch Overflow feature when your familiar damages a creature.</li>
                <li><strong>I Remember</strong>: The Companion or Familiar that is summoned by this trinket is always the same one.</li>
                <li><strong>I Serve</strong>: Your familiar has a personality of its own— it mayor may not be happy to serve you. But whatever its attitude, the familiar must obey the command of whomever wears the trinket.</li>
            </ul>
            <h5 class="caption">PACT OF THE TOME</h5>
            <p>You ask your patron for forbidden knowledge, and are rewarded with a tome of eldritch secrets.</p>
            <h6>Book of Erudition</h6>
            <p>Starting at 1st level, you gain a book of forbidden knowledge from your patron, granting you more power over the arcane.</p>
            <p class="indent"><strong>Adding Rituals</strong>: When you find a ritual spell, you can add it to the book if the spell's level is equal to or less than half your warlock level (rounded up).</p>
            <p>Your patron gives you a grimoire called a Book of Shadows. When you gain this feature, choose three cantrips from any class’s spell list. While the book is on your person, you can cast those cantrips at will. They don’t count against your number of cantrips known.</p>
            <p class="indent">For each level of the spell, you must spend 2 hours and 50gp for the rare inks needed to inscribe it.</p>
            <h5>Book of Erudtion</h5>
            <p><i>Item, Book</i></p>
            <p>An eldritch book of forbidden knowledge. While you are holding your Book of Erudition, you can cast your warlock spells as a ritual if they have the ritual tag.</p>
            <p class="indent">Your book bears the unmistakable mark of your patron —fiendish red veins, fey vines and flowers, aberrant runes andetchings, etc.</p>
            <ul>
                <li><strong>Forbidden Cantrip</strong>: Choose one cantrip from any class spell list. While the book is on your person, you can cast that cantrip at will. It doesn't count against your number of cantrips known.</li>
                <li><strong>Forbidden Ritual</strong>: Choose one 1st-level spell that has the ritual tag from any class spell list. The spell appears in the book and doesn't count against the number of spells you know. While the book is in your hand, you can cast that spell as a ritual.</li>
            </ul>
            <h5 class="caption">PACT OF THE BLADE</h5>
            <p>You gain a unique, eldritch weapon from your patron. This weapon is honed and shaped by your own mind — the stronger your ability, the sharper your blade.</p>
            <p class="indent">In addition, you gain proficiency with medium armor,shields, and martial weapons.</p>
            <h5>Pact Weapon</h5>
            <p><i>Item, Weapon</i></p>
            <p>You can spend one bonus action to summon your pact weapon into your empty hand. You can choose the form that this weapon takes each time you summon it — a dagger, a sword, a bow, etc — though it must be a form you are proficient with. Alternatively, you can summon your pact weapon whenever you take the attack action - You must attack with the weapon you summon.</p>
            <p class="indent">Your weapon bears the unmistakable mark of your eldritch patron — fiendish red veins, fey vines and flowers, aberrant runes and etchings, etc.</p>
            <ul>
                <li><strong>Eldritch Strike</strong>: When you attack with this weapon, you can use your warlock spellcasting ability modifier instead ofStrength or Dexterity, for the attack and damage rolls. You can use your Eldritch Overflow feature when you damage a creature with a weapon attack that uses your pact weapon.</li>
                <li><strong>Magical Origin</strong>: This weapon counts as magical for the purpose of overcoming resistance and immunity to nonmagical attacks and damage.</li>
                <li><strong>Ephemeral</strong>: This weapon disappears if you use this feature again, if you dismiss the weapon (no action required), or if you die.</li>
            </ul>
        </description>
        <sheet display="false" />
        <rules>
            <select type="Class Feature" name="Pact Boon" supports="Pact Boon" level="1"/>
        </rules>
    </element>
    <element name="Ability Score Improvement" type="Class Feature" source="Player’s Handbook" id="ID_HB_WR_ABILITY_SCORE_IMPROVEMENT_WARLOCK">
        <requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_ABILITY_SCORE_IMPROVEMENT</requirements>
        <compendium display="false" />
        <description>
            <p>When you reach 4th level, and again at 8th, 12th, 16th, and 19th level, you can increase one ability score of your choice by 2, or you can increase two ability scores of your choice by 1. As normal, you can't increase an ability score above 20 using this feature.</p>
        </description>
        <sheet display="false" />
        <rules>
            <select type="Class Feature" name="Improvement Option (Warlock 4)" supports="Improvement Option,Warlock,4" level="4" />
            <select type="Class Feature" name="Improvement Option (Warlock 8)" supports="Improvement Option,Warlock,8" level="8" />
            <select type="Class Feature" name="Improvement Option (Warlock 12)" supports="Improvement Option,Warlock,12" level="12" />
            <select type="Class Feature" name="Improvement Option (Warlock 16)" supports="Improvement Option,Warlock,16" level="16" />
            <select type="Class Feature" name="Improvement Option (Warlock 19)" supports="Improvement Option,Warlock,19" level="19" />
        </rules>
    </element>
    <element name="Eldritch Overflow" type="Class Feature" source="The Warlock Remastered" id="ID_HB_WR_ELDRITCH_OVERFLOW">
            <requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_ELDRITCH_OVERFLOW</requirements>
                <compendium display="false" />
            <description>
        <p>Starting at 1st level, your otherworldly power makes even your weakest spells formidable, adding a secondary burst of power to their impacts. When a creature takes damage from one of your warlock cantrips or class feature as a result of being hit by an attack or failing a saving throw, you can deal an additional 1d4 damage. You can only deal this damage once per turn.</p>
                <p class="indent">The amount of the extra damage increases to 1d6 at 8th level, 1d8 at 14th level, and 1d10 at 17th level.</p>
            </description>
        <sheet usage="1/Turn">
            <description level="1">You can add 1d4 to the damage roll of your spell or class feature.</description>
            <description level="8">You can add 1d6 to the damage roll of your spell or class feature.</description>
            <description level="14">You can add 1d8 to the damage roll of your spell or class feature.</description>
            <description level="17">You can add 1d10 to the damage roll of your spell or class feature.</description>
        </sheet>
    </element>
    <element name="Mystic Arcanum" type="Class Feature" source="Player’s Handbook" id="ID_WOTC_PHB_CLASS_FEATURE_WARLOCK_MYSTIC_ARCANUM">
        <requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_MYSTIC_ARCANUM</requirements>
        <description>
            <p>At 11th level, your patron bestows upon you a magical secret called an arcanum. Choose one 6th-level spell from the warlock spell list as this arcanum.</p>
            <p class="indent">You can cast your arcanum spell once without expending a spell slot. You must finish a long rest before you can do so again.</p>
            <p class="indent">At higher levels, you gain more warlock spells of your choice that can be cast in this way: one 7th-level spell at 13th level, one 8th-level spell at 15th level, and one 9th-level spell at 17th level. You regain all uses of your Mystic Arcanum when you finish a long rest.</p>
        </description>
        <sheet usage="1/Long Rest">
            <description>You can cast your arcanum spells once without expending a spell slot.</description>
        </sheet>
        <rules>
            <select type="Spell" name="Arcanum Spell (Mystic Arcanum)" supports="Warlock,6" level="11" spellcasting="Warlock" />
            <select type="Spell" name="Arcanum Spell (Mystic Arcanum)" supports="Warlock,7" level="13" spellcasting="Warlock" />
            <select type="Spell" name="Arcanum Spell (Mystic Arcanum)" supports="Warlock,8" level="15" spellcasting="Warlock" />
            <select type="Spell" name="Arcanum Spell (Mystic Arcanum)" supports="Warlock,9" level="17" spellcasting="Warlock" />
        </rules>
    </element>
    <element name="Arcane Feedback" type="Class Feature" source="The Warlock Remastered" id="ID_HB_WR_ARCANE_FEEDBACK">
        <requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_ARCANE_FEEDBACK</requirements>
        <description>
            <p>At 18th level, whenever you use your Mystic Arcanum feature,you can regain one expended spell slot from your Pact Magic feature.</p>
            <p class="indent">Additionally, your patron grants you moments of unrestricted knowledge. Once per long rest, you can cast any spell of 5th-level or lower on the warlock spell list, without expending a spell slot.</p>
        </description>
        <sheet usage="1/Long Rest">
            <description>You can cast any spell of 5th-level or lower on the warlock spell list, without expending a spell slot.</description>
        </sheet>
    </element>
    <element name="Eldritch Mastery" type="Class Feature" source="Player’s Handbook" id="ID_HB_WR_ELDRITCH_MASTERY">
        <requirements>!ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_ELDRITCH_MASTERY</requirements>
        <description>
            <p>At 20th level, At 20th level, you can entreat your patron to bestow an instantaneous surge of power upon you. As a bonus action,you can regain all your expended Pact Magic spell slots.</p>
            <p class="indent">Once you regain spell slots with this feature, you must finish a long rest before you can do so again.</p>
        </description>
        <sheet usage="1/Long Rest">
            <description>You can spend 1 bonus action to regain all your expended spell slots from your Pact Magic feature.</description>
        </sheet>
    </element>

    <element name="Pact of the Chain" type="Class Feature" source="Player’s Handbook" id="ID_HB_WR_PACT_OF_THE_CHAIN">
        <supports>Pact Boon</supports>
        <description>
            <p>You ask your patron for the ability to control others, and are rewarded with a bound familiar.</p>
            <h6>Chainned Familiar</h6>
            <p>You gain a special trinket from your patron which allows you to summon a familiar and bind it to your will.</p>
            <h5>Chain Trinket</h5>
            <p><i>Item, Trinket</i></p>
            <p>An eldritch trinket — such as a ring, bracelet, earring, or a diadem. While you are wearing this trinket, you can cast the Find Familiar spell as a ritual without spending material components.</p>
            <p class="indent">Your trinket bears the unmistakable mark of your patron —fiendish red veins, fey vines and flowers, aberrant runes and etchings, etc.</p>
            <ul>
                <li><strong>Chain Master</strong>: When you take the Attack action, you can forgo one of your attacks, or use your bonus action to allow your familiar to spend its reaction and make one attack of its own. You can use your Eldritch Overflow feature when your familiar damages a creature.</li>
                <li><strong>I Remember</strong>: The Companion or Familiar that is summoned by this trinket is always the same one.</li>
                <li><strong>I Serve</strong>: Your familiar has a personality of its own— it mayor may not be happy to serve you. But whatever its attitude, the familiar must obey the command of whomever wears the trinket.</li>
            </ul>
        </description>
        <sheet>
            <description level="1">
            <ul>
                <li><strong>Chain Master</strong>: When you take the Attack action, you can forgo one of your attacks, or use your bonus action to allow your familiar to spend its reaction and make one attack of its own. You can use your Eldritch Overflow feature when your familiar damages a creature.</li>
                <li><strong>I Remember</strong>: The Companion or Familiar that is summoned by this trinket is always the same one.</li>
                <li><strong>I Serve</strong>: Your familiar has a personality of its own— it mayor may not be happy to serve you. But whatever its attitude, the familiar must obey the command of whomever wears the trinket.</li>
            </ul></description>
            <description level="3">
                <ul>
                    <li><strong>Chain Master</strong>: When you take the Attack action, you can forgo one of your attacks, or use your bonus action to allow your familiar to spend its reaction and make one attack of its own. You can use your Eldritch Overflow feature when your familiar damages a creature.</li>
                    <li><strong>I Remember</strong>: The Companion or Familiar that is summoned by this trinket is always the same one.</li>
                    <li><strong>I Serve</strong>: Your familiar has a personality of its own— it mayor may not be happy to serve you. But whatever its attitude, the familiar must obey the command of whomever wears the trinket.</li>
                    <li><strong>Might of the Master</strong>: The following numbers increase by 1 when your proficiency bonus increases by 1:
                        the companion's skill and saving throw bonuses, the bonuses to hit and damage of its attacks, and two ability scores of your choice.</li>
                </ul>
            </description>
        </sheet>
        <rules>
            <grant type="Spell" id="ID_PHB_SPELL_FIND_FAMILIAR" spellcasting="Warlock" />
            <select type="Companion" name="Chained Familiar, Pact of the Chain" supports="Familiar||Variant Familiar||Chained Familiar" />
        </rules>
    </element>
    <element name="Pact of the Tome" type="Class Feature" source="Player’s Handbook" id="ID_WOTC_PHB_CLASS_FEATURE_WARLOCK_PACT_BOON_PACT_OF_THE_TOME">
        <supports>Pact Boon</supports>
        <description>
            <p>Your patron gives you a grimoire called a Book of Shadows. When you gain this feature, choose three cantrips from any class’s spell list (the three needn’t be from the same list). While the book is on your person, you can cast those cantrips at will. They don’t count against your number of cantrips known. If they don’t appear on the warlock spell list, they are nonetheless warlock spells for you.</p>
            <p class="indent">If you lose your Book of Shadows, you can perform a 1-hour ceremony to receive a replacement from your patron. This ceremony can be performed during a short or long rest, and it destroys the previous book. The book turns to ash when you die.</p>
        </description>
        <sheet>
            <description>Your patron gives you a grimoire called a Book of Shadows.
                If you lose it, you can perform a 1-hour ceremony to receive a replacement from your patron. This ceremony can be performed during a short or long rest, and it destroys the previous book. The book turns to ash when you die.</description>
        </sheet>
        <rules>
            <select type="Spell" name="Cantrip (Pact of the Tome)" supports="0" level="1" number="3" spellcasting="Warlock"/>
        </rules>
    </element>
    <element name="Pact of the Blade" type="Class Feature" source="Player’s Handbook" id="ID_WOTC_PHB_CLASS_FEATURE_WARLOCK_PACT_BOON_PACT_OF_THE_BLADE">
        <supports>Pact Boon</supports>
        <description>
            <p>You can use your action to create a pact weapon in your empty hand. You can choose the form that this melee weapon takes each time you create it. You are proficient with it while you wield it. This weapon counts as magical for the purpose of overcoming resistance and immunity to nonmagical attacks and damage.</p>
            <p class="indent">Your pact weapon disappears if it is more than 5 feet away from you for 1 minute or more. It also disappears if you use this feature again, if you dismiss the weapon (no action required), or if you die.</p>
            <p class="indent">You can transform one magic weapon into your pact weapon by performing a special ritual while you hold the weapon. You perform the ritual over the course of 1 hour, which can be done during a short rest. You can then dismiss the weapon, shunting it into an extradimensional space, and it appears whenever you create your pact weapon thereafter. You can’t affect an artifact or a sentient weapon in this way. The weapon ceases being your pact weapon if you die, if you perform the 1-hour ritual on a different weapon, or if you use a 1-hour ritual to break your bond to it. The weapon appears at your feet if it is in the extradimensional space when the bond breaks.</p>
        </description>
        <sheet usage="Action">
            <description>Create a pact weapon in your empty hand. This weapon counts as magical for the purpose of overcoming resistance and immunity to nonmagical attacks and damage.
                Your pact weapon disappears if it is more than 5 feet away from you for 1 minute or more. It also disappears if you use this feature again, if you dismiss the weapon (no action required), or if you die.
                You can transform one magic weapon into your pact weapon by performing a special ritual while you hold the weapon. You perform the ritual over the course of 1 hour, which can be done during a short rest. You can then dismiss the weapon, shunting it into an extradimensional space, and it appears whenever you create your pact weapon thereafter. You can’t affect an artifact or a sentient weapon in this way. The weapon ceases being your pact weapon if you die, if you perform the 1-hour ritual on a different weapon, or if you use a 1-hour ritual to break your bond to it. The weapon appears at your feet if it is in the extradimensional space when the bond breaks.</description>
        </sheet>
    </element>

    <!--Feature Replacement Grants-->
    <element name="Otherworldly Patron Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_OTHERWORLDLY_PATRON" />
    <element name="Pact Magic Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_SPELLCASTING_PACT_MAGIC" />
    <element name="Eldritch Invocations Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_ELDRITCH_INVOCATIONS" />
    <element name="Pact Boon Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_PACT_BOON" />
    <element name="Ability Score Improvement Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_ABILITY_SCORE_IMPROVEMENT" />
    <element name="Mystic Arcanum Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_MYSTIC_ARCANUM" />
    <element name="Eldritch Master Feature Replacement" type="Grants" source="Internal" id="ID_INTERNAL_FEATURE_REPLACEMENT_WARLOCK_ELDRITCH_MASTER" />
</elements>